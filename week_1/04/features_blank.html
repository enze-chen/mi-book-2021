
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Featurization notebook &#8212; Introduction to Materials Informatics</title>
    
  <link href="../../_static/css/theme.css" rel="stylesheet" />
  <link href="../../_static/css/index.c5995385ac14fb8791e8eb36b4908be2.css" rel="stylesheet" />

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/sphinx-book-theme.acff12b8f9c144ce68a297486a2fa670.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../../_static/js/index.1c5a1a01449ed65a7b51.js">

    <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/togglebutton.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../_static/sphinx-book-theme.12a9622fbb08dcb3a2a40b2c02b83a57.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="https://unpkg.com/@jupyter-widgets/html-manager@^0.20.0/dist/embed-amd.js"></script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="../../_static/sphinx-thebe.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["\\(", "\\)"]], "displayMath": [["\\[", "\\]"]], "processRefs": false, "processEnvironments": false}})</script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="canonical" href="https://enze-chen.github.io/mi-book/week_1/04/features_blank.html" />
    <link rel="shortcut icon" href="../../_static/mi_favicon.png"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Advanced ML methods" href="advanced_ml.html" />
    <link rel="prev" title="Featurization" href="features.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../../index.html">
      
      <img src="../../_static/mi_logo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">Introduction to Materials Informatics</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../intro.html">
   Welcome! üëã
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Preamble üìú
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../preamble/overview.html">
   1. Overview
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../preamble/setup.html">
   2. Setup
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../preamble/schedule.html">
   3. Schedule (one page) üìÖ
  </a>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Week 1Ô∏è‚É£
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../01/day_01.html">
   Day 01: Introductions
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../01/informatics.html">
     Intro to MI
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../01/module.html">
     Intro to Module 2
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../01/intro_python_jupyter_blank.html">
     Intro to Python
    </a>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../01/homework_01.html">
     Homework
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
    <label for="toctree-checkbox-2">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../01/python_greatest_hits_blank.html">
       Python: The greatest hits
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="../01/python_gory_details_blank.html">
       Python: The gory details
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../02/day_02.html">
   Day 02: MI and data
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../02/recap_logistics.html">
     Recap first day
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../02/opportunities.html">
     Opportunities and challenges
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../02/file_types_blank.html">
     File types
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../02/tabular_data_blank.html">
     Tabular data
    </a>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../02/databases.html">
     Databases
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
    <label for="toctree-checkbox-4">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../02/materials_project_blank.html">
       The Materials Project
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../02/reading_docs.html">
     Reading documentation
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../02/homework_02.html">
     Homework
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../03/day_03.html">
   Day 03: Data visualization
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
  <label for="toctree-checkbox-5">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../03/recap_data.html">
     Recap data discussion
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../03/data_viz_blank.html">
     Data visualization
    </a>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../03/best_practices_viz.html">
     Best practices for visualization
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
    <label for="toctree-checkbox-6">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../03/best_practices_viz_blank.html">
       Follow-along notebook
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../03/reading_papers.html">
     Reading papers
    </a>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="../03/homework_03.html">
     Homework
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/>
    <label for="toctree-checkbox-7">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="../03/advanced_viz_blank.html">
       Advanced visualizations
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="day_04.html">
   Day 04: ML speedrun
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/>
  <label for="toctree-checkbox-8">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="recap_viz.html">
     Recap visualization discussion
    </a>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="intro_ml.html">
     Introduction to ML
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/>
    <label for="toctree-checkbox-9">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="intro_ml_blank.html">
       Follow-along notebook
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="ml_perf.html">
     Quantifying performance
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/>
    <label for="toctree-checkbox-10">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="ml_perf_blank.html">
       Follow-along notebook
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 current active has-children">
    <a class="reference internal" href="features.html">
     Featurization
    </a>
    <input checked="" class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" type="checkbox"/>
    <label for="toctree-checkbox-11">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul class="current">
     <li class="toctree-l3 current active">
      <a class="current reference internal" href="#">
       Follow-along notebook
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="advanced_ml.html">
     Advanced ML methods
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" type="checkbox"/>
    <label for="toctree-checkbox-12">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="advanced_ml_blank.html">
       Follow-along notebook
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="homework_04.html">
     Homework
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../05/day_05.html">
   Day 05: MI research
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" type="checkbox"/>
  <label for="toctree-checkbox-13">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../05/recap_ml.html">
     Recap ML discussion
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../05/research_discuss.html">
     Research discussion
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../05/practical.html">
     Practical considerations
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../05/homework_05.html">
     Homework
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../05/install_python.html">
     Installing Python locally (optional)
    </a>
   </li>
  </ul>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Week 2Ô∏è‚É£
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../week_2/06/day_06.html">
   Day 06: Independence Day
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../week_2/07/day_07.html">
   Day 07: Research
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" type="checkbox"/>
  <label for="toctree-checkbox-14">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../week_2/07/welcome_back.html">
     Welcome back!
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../week_2/08/day_08.html">
   Day 08: Research + guest speaker
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" type="checkbox"/>
  <label for="toctree-checkbox-15">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../week_2/08/guest_ucb.html">
     Guest speaker: Alex!
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../week_2/08/proposals.html">
     Proposals
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../week_2/09/day_09.html">
   Day 09: Research
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" type="checkbox"/>
  <label for="toctree-checkbox-16">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../week_2/09/check_in.html">
     Check-in meeting instructions
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../week_2/10/day_10.html">
   Day 10: Research + guest speaker
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" type="checkbox"/>
  <label for="toctree-checkbox-17">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../week_2/10/guest_aionics.html">
     Guest speaker: Austin!
    </a>
   </li>
  </ul>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Week 3Ô∏è‚É£
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../week_3/11/day_11.html">
   Day 11: Research + grad school
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-18" name="toctree-checkbox-18" type="checkbox"/>
  <label for="toctree-checkbox-18">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../week_3/11/presentations.html">
     Giving presentations
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../week_3/11/grad_school.html">
     Grad school talk: Mark!
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../week_3/12/day_12.html">
   Day 12: Research + guest speaker
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-19" name="toctree-checkbox-19" type="checkbox"/>
  <label for="toctree-checkbox-19">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../week_3/12/pull_requests.html">
     GitHub pull requests
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../week_3/12/guest_citrine.html">
     Guest speaker: Ventura!
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../week_3/13/day_13.html">
   Day 13: Research
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../week_3/14/day_14.html">
   Day 14: Slam presentations
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-20" name="toctree-checkbox-20" type="checkbox"/>
  <label for="toctree-checkbox-20">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../week_3/14/peer_review.html">
     Peer review
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../week_3/14/final_presentations.html">
     Final presentations
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="../../week_3/15/day_15.html">
   Day 15: Conclusions
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-21" name="toctree-checkbox-21" type="checkbox"/>
  <label for="toctree-checkbox-21">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="../../week_3/15/summary.html">
     Summary
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="../../week_3/15/next.html">
     What‚Äôs next?
    </a>
   </li>
  </ul>
 </li>
</ul>
<p class="caption">
 <span class="caption-text">
  Appendices üìù
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../appendix/acknowl.html">
   1. Acknowledgements
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../appendix/glossary.html">
   2. Glossary
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../../appendix/future.html">
   3. Future directions üõ£
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../../_sources/week_1/04/features_blank.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/enze-chen/mi-book"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/enze-chen/mi-book/issues/new?title=Issue%20on%20page%20%2Fweek_1/04/features_blank.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        <a class="edit-button" href="https://github.com/enze-chen/mi-book/edit/master/week_1/04/features_blank.ipynb"><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Edit this page"><i class="fas fa-pencil-alt"></i>suggest edit</button></a>
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        
        <a class="jupyterhub-button" href="https://staging.datahub.berkeley.edu/hub/user-redirect/git-pull?repo=https://github.com/enze-chen/mi-book&urlpath=tree/mi-book/week_1/04/features_blank.ipynb&branch=master"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch JupyterHub" data-toggle="tooltip"
                data-placement="left"><img class="jupyterhub-button-logo"
                    src="../../_static/images/logo_jupyterhub.svg"
                    alt="Interact on JupyterHub">JupyterHub</button></a>
        
        
        <a class="colab-button" href="https://colab.research.google.com/github/enze-chen/mi-book/blob/master/week_1/04/features_blank.ipynb"><button type="button" class="btn btn-secondary topbarbtn"
                title="Launch Colab" data-toggle="tooltip" data-placement="left"><img class="colab-button-logo"
                    src="../../_static/images/logo_colab.png"
                    alt="Interact on Colab">Colab</button></a>
        
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#learning-objectives">
   Learning objectives
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#contents">
   Contents
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#overview">
   Overview
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#first-import-everything-because-were-getting-lazy">
     First import everything because we‚Äôre getting lazy
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#choosing-bad-features">
     Choosing bad features
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#matminer">
   matminer
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#featurizing-a-chemical-formula">
     Featurizing a chemical formula
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#band-gap-data">
     Band gap data
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#enumerating-elemental-properties">
     Enumerating elemental properties
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#remove-correlated-features">
     Remove correlated features
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#how-can-we-spot-these-correlations-and-remove-them-from-our-dataset">
       How can we spot these correlations and remove them from our dataset?
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#finally-finally-finally-build-the-ml-model-for-cv">
     Finally, finally,
     <em>
      finally
     </em>
     build the ML model for CV
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#model-complexity">
   Model complexity
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#feature-selection">
   Feature selection
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#exercise-apply-feature-selection-to-the-band-gap-prediction-problem-and-identify-the-top-10-features">
     Exercise: apply feature selection to the band gap prediction problem and identify the top 10 features.
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#conclusion">
   Conclusion
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="featurization-notebook">
<h1>Featurization notebook<a class="headerlink" href="#featurization-notebook" title="Permalink to this headline">¬∂</a></h1>
<p><em>Authors: Enze Chen and Mark Asta (University of California, Berkeley)</em></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This is an interactive exercise, so you will want to click the <span class="fa fa-rocket"></span> and open the notebook in DataHub (or Colab for non-UCB students).</p>
</div>
<div class="section" id="learning-objectives">
<h2>Learning objectives<a class="headerlink" href="#learning-objectives" title="Permalink to this headline">¬∂</a></h2>
<p>This notebook discuss featurization and how we can apply our domain knowledge to create <strong>physically-meaningful features</strong> for ML applications.
By the end of this notebook, you will be able to:</p>
<ol class="simple">
<li><p>Articulate why it‚Äôs important to use physically-meaningful features for MI.</p></li>
<li><p>Use the <a class="reference external" href="https://hackingmaterials.lbl.gov/matminer/"><code class="docutils literal notranslate"><span class="pre">matminer</span></code></a> package to featurize chemical formulas.</p></li>
</ol>
<p>We will progress through most of this exercise together as a group, and if there‚Äôs a part that‚Äôs particularly tricky, please do take time to review it.
As always, we‚Äôre happy to hear from you if you have any questions.</p>
</div>
<div class="section" id="contents">
<h2>Contents<a class="headerlink" href="#contents" title="Permalink to this headline">¬∂</a></h2>
<p>These exercises are grouped into the following sections:</p>
<ol class="simple">
<li><p><a class="reference external" href="#Overview">Overview</a></p></li>
<li><p><a class="reference external" href="#matminer">matminer</a></p></li>
<li><p><a class="reference external" href="#Model-complexity">Model complexity</a></p></li>
<li><p><a class="reference external" href="#Feature-selection">Feature selection</a></p></li>
</ol>
</div>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¬∂</a></h2>
<p><a class="reference external" href="#Contents">Back to top</a></p>
<p>From our live discussion, we learned that creating physically-meaningful features will <strong>improve interpretability</strong> of our models as well as their <strong>predictive performance</strong>.
This is especially true when we have small and sparse datasets, which tends to be the case for MI applications.
With the right choice of <em>typically a few</em> features, we might be able to uncover a strong correlation with the target property of interest and simplify our modeling problem.</p>
<p>So far, we‚Äôve been working with materials datasets and building ML models that <em>already do this</em>, so this idea may not be too surprising to you.
For example, it is <em>because</em> we know that the atomic number is correlated with atomic weight that we might choose to use atomic number as a feature to predict the atomic weight, and it turned out to give good performance, even with a simple model like linear regression.
If someone did not know this information, they could use <em>many more features</em> and still <em>fail to get a good ML model</em>.
We will now show this is the case.</p>
<div class="section" id="first-import-everything-because-were-getting-lazy">
<h3>First import everything because we‚Äôre getting lazy<a class="headerlink" href="#first-import-everything-because-were-getting-lazy" title="Permalink to this headline">¬∂</a></h3>
<p>Although, fwiw, if you are sharing notebooks with others, it‚Äôs not a bad idea to import everything at the top.
That way, if a user does not have a package, they find out right away and can go install it rather than discovering this midway through and having to interrupt their flow. üåä</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s1">&#39;display.max_columns&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
<span class="n">pd</span><span class="o">.</span><span class="n">set_option</span><span class="p">(</span><span class="s1">&#39;display.max_rows&#39;</span><span class="p">,</span> <span class="mi">300</span><span class="p">)</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="o">%</span><span class="k">matplotlib</span> inline

<span class="kn">from</span> <span class="nn">sklearn.linear_model</span> <span class="kn">import</span> <span class="n">LinearRegression</span>
<span class="kn">from</span> <span class="nn">sklearn.preprocessing</span> <span class="kn">import</span> <span class="n">StandardScaler</span>
<span class="kn">from</span> <span class="nn">sklearn.metrics</span> <span class="kn">import</span> <span class="n">mean_squared_error</span><span class="p">,</span> <span class="n">mean_absolute_error</span>
<span class="kn">from</span> <span class="nn">sklearn.model_selection</span> <span class="kn">import</span> <span class="n">KFold</span><span class="p">,</span> <span class="n">cross_val_score</span><span class="p">,</span> <span class="n">cross_val_predict</span>

<span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;figure.figsize&#39;</span><span class="p">:(</span><span class="mi">8</span><span class="p">,</span><span class="mi">6</span><span class="p">),</span>       <span class="c1"># Increase figure size</span>
                     <span class="s1">&#39;font.size&#39;</span><span class="p">:</span><span class="mi">20</span><span class="p">,</span>               <span class="c1"># Increase font size</span>
                     <span class="s1">&#39;mathtext.fontset&#39;</span><span class="p">:</span><span class="s1">&#39;cm&#39;</span><span class="p">,</span>      <span class="c1"># Change math font to Computer Modern</span>
                     <span class="s1">&#39;mathtext.rm&#39;</span><span class="p">:</span><span class="s1">&#39;serif&#39;</span><span class="p">,</span>        <span class="c1"># Documentation recommended follow-up</span>
                     <span class="s1">&#39;lines.linewidth&#39;</span><span class="p">:</span><span class="mi">5</span><span class="p">,</span>          <span class="c1"># Thicker plot lines</span>
                     <span class="s1">&#39;lines.markersize&#39;</span><span class="p">:</span><span class="mi">12</span><span class="p">,</span>        <span class="c1"># Larger plot points</span>
                     <span class="s1">&#39;axes.linewidth&#39;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span>           <span class="c1"># Thicker axes lines (but not too thick)</span>
                     <span class="s1">&#39;xtick.major.size&#39;</span><span class="p">:</span><span class="mi">8</span><span class="p">,</span>         <span class="c1"># Make the x-ticks longer (our plot is larger!)</span>
                     <span class="s1">&#39;xtick.major.width&#39;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span>        <span class="c1"># Make the x-ticks wider</span>
                     <span class="s1">&#39;ytick.major.size&#39;</span><span class="p">:</span><span class="mi">8</span><span class="p">,</span>         <span class="c1"># Ditto for y-ticks</span>
                     <span class="s1">&#39;ytick.major.width&#39;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span>        <span class="c1"># Ditto for y-ticks</span>
                     <span class="s1">&#39;xtick.direction&#39;</span><span class="p">:</span><span class="s1">&#39;in&#39;</span><span class="p">,</span> 
                     <span class="s1">&#39;ytick.direction&#39;</span><span class="p">:</span><span class="s1">&#39;in&#39;</span><span class="p">})</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="choosing-bad-features">
<h3>Choosing bad features<a class="headerlink" href="#choosing-bad-features" title="Permalink to this headline">¬∂</a></h3>
<p>Now we‚Äôll choose a few features that are the column names of our elemental properties DataFrame and we‚Äôll store these features into a <code class="docutils literal notranslate"><span class="pre">features</span></code> list.
We then load in the DataFrame, making sure to drop any rows that have <code class="docutils literal notranslate"><span class="pre">NaN</span></code> in those columns (<code class="docutils literal notranslate"><span class="pre">df.dropna(subset=features)</span></code>) so that we can actually perform linear regression.
Feel free to add more features to the list, just don‚Äôt add <code class="docutils literal notranslate"><span class="pre">atomic_number</span></code>!</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">features</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;row&#39;</span><span class="p">,</span> <span class="s1">&#39;electronegativity&#39;</span><span class="p">,</span> <span class="s1">&#39;molar_volume&#39;</span><span class="p">]</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;../../assets/data/week_1/04/elem_props.csv&#39;</span><span class="p">)</span>
<span class="n">df</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">subset</span><span class="o">=</span><span class="n">features</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;There are </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">df</span><span class="p">)</span><span class="si">}</span><span class="s1"> rows of the data remaining.&#39;</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>

<span class="n">X</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">features</span><span class="p">]</span>
<span class="c1"># X = df[[&#39;atomic_number&#39;]]    # uncomment this line and see what happens!</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="s1">&#39;atomic_mass&#39;</span><span class="p">]</span>

<span class="n">scaler</span> <span class="o">=</span> <span class="n">StandardScaler</span><span class="p">()</span>
<span class="n">X_scaled</span> <span class="o">=</span> <span class="n">scaler</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>

<span class="n">lr</span> <span class="o">=</span> <span class="n">LinearRegression</span><span class="p">()</span>
<span class="n">kfold</span> <span class="o">=</span> <span class="n">KFold</span><span class="p">(</span><span class="n">n_splits</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">shuffle</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">scores</span> <span class="o">=</span> <span class="n">cross_val_score</span><span class="p">(</span><span class="n">lr</span><span class="p">,</span> <span class="n">X_scaled</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">scoring</span><span class="o">=</span><span class="s1">&#39;neg_root_mean_squared_error&#39;</span><span class="p">,</span> <span class="n">cv</span><span class="o">=</span><span class="n">kfold</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;The average CV score is </span><span class="si">{</span><span class="o">-</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">scores</span><span class="p">)</span><span class="si">:</span><span class="s1">.3f</span><span class="si">}</span><span class="s1">.&#39;</span><span class="p">)</span>

<span class="n">lr</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_scaled</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
<span class="n">yhat</span> <span class="o">=</span> <span class="n">lr</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_scaled</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;The slopes are </span><span class="si">{</span><span class="n">lr</span><span class="o">.</span><span class="n">coef_</span><span class="si">}</span><span class="s1"> and the intercept term is </span><span class="si">{</span><span class="n">lr</span><span class="o">.</span><span class="n">intercept_</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span><span class="mi">7</span><span class="p">))</span>
<span class="n">ax</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">yhat</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="mi">40</span><span class="p">)</span>
<span class="n">yhat</span> <span class="o">=</span> <span class="n">cross_val_predict</span><span class="p">(</span><span class="n">lr</span><span class="p">,</span> <span class="n">X_scaled</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">cv</span><span class="o">=</span><span class="n">kfold</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="s1">&#39;k&#39;</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=-</span><span class="mi">5</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;actual atomic weight&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;predicted atomic weight&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_aspect</span><span class="p">(</span><span class="s1">&#39;equal&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>There are 94 rows of the data remaining.
</pre></div>
</div>
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>symbol</th>
      <th>name</th>
      <th>atomic_number</th>
      <th>atomic_mass</th>
      <th>atomic_radius</th>
      <th>row</th>
      <th>group</th>
      <th>is_metal</th>
      <th>electronegativity</th>
      <th>density_solid</th>
      <th>melting_point</th>
      <th>molar_volume</th>
      <th>refractive_index</th>
      <th>elec_resist</th>
      <th>therm_cond</th>
      <th>youngs_mod</th>
      <th>poissons_ratio</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>H</td>
      <td>Hydrogen</td>
      <td>1</td>
      <td>1.007940</td>
      <td>0.25</td>
      <td>1</td>
      <td>1</td>
      <td>False</td>
      <td>2.20</td>
      <td>NaN</td>
      <td>14.01 K</td>
      <td>11.42</td>
      <td>1.000132 (gas; liquid 1.12)(no units)</td>
      <td>NaN</td>
      <td>0.1805</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Li</td>
      <td>Lithium</td>
      <td>3</td>
      <td>6.941000</td>
      <td>1.45</td>
      <td>2</td>
      <td>1</td>
      <td>True</td>
      <td>0.98</td>
      <td>535.0</td>
      <td>453.69 K</td>
      <td>13.02</td>
      <td>NaN</td>
      <td>9.500000e-08</td>
      <td>85.0000</td>
      <td>4.9</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Be</td>
      <td>Beryllium</td>
      <td>4</td>
      <td>9.012182</td>
      <td>1.05</td>
      <td>2</td>
      <td>2</td>
      <td>True</td>
      <td>1.57</td>
      <td>1848.0</td>
      <td>1560.0 K</td>
      <td>4.85</td>
      <td>NaN</td>
      <td>3.800000e-08</td>
      <td>190.0000</td>
      <td>287.0</td>
      <td>0.032</td>
    </tr>
    <tr>
      <th>4</th>
      <td>B</td>
      <td>Boron</td>
      <td>5</td>
      <td>10.811000</td>
      <td>0.85</td>
      <td>2</td>
      <td>13</td>
      <td>False</td>
      <td>2.04</td>
      <td>2460.0</td>
      <td>2349.0 K</td>
      <td>4.39</td>
      <td>NaN</td>
      <td>1.000000e+12</td>
      <td>27.0000</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>5</th>
      <td>C</td>
      <td>Carbon</td>
      <td>6</td>
      <td>12.010700</td>
      <td>0.70</td>
      <td>2</td>
      <td>14</td>
      <td>False</td>
      <td>2.55</td>
      <td>2267.0</td>
      <td>3800.0 K</td>
      <td>5.29</td>
      <td>2.417 (diamond)(no units)</td>
      <td>1.000000e-05</td>
      <td>140.0000</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
</div></div><div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>The average CV score is 30.679.
The slopes are [74.49875132 18.53037859  3.99969981] and the intercept term is 122.69665529765962
</pre></div>
</div>
<img alt="../../_images/features_blank_5_3.png" src="../../_images/features_blank_5_3.png" />
</div>
</div>
<p><strong>Pause and reflect</strong>: Note how we can use many more features to build our ML model and still create the parity plot the same way as before, since it only depends on the output predictions.
Based on the parity plot and coefficients, can you tell how your choice of features are being leveraged for the prediction?</p>
<p>What you should observe is that using any combination of the other provided features basically sucks for predicting the atomic weight, and as soon as we switch to atomic number, everything is right with the world. üòá
This is encouraging, but we know that in the real world, materials properties won‚Äôt be <em>this</em> strongly dependent on each other, and then it becomes very unclear which features we should choose.
Also, features won‚Äôt always be given to you in a nice data table like the previous example, so is there a way we can programmatically and automatically generate some physically-meaningful features from a material‚Äôs chemical formula or crystal structure?</p>
</div>
</div>
<div class="section" id="matminer">
<h2>matminer<a class="headerlink" href="#matminer" title="Permalink to this headline">¬∂</a></h2>
<p><a class="reference external" href="#Contents">Back to top</a></p>
<p><img alt="matminer" src="../../_images/matminer.png" /></p>
<p>It turns out that there are now <em>many</em> Python packages that are able to generate features, and because we‚Äôre proud Berkeley Bears, we will use the <a class="reference external" href="https://hackingmaterials.lbl.gov/matminer/"><code class="docutils literal notranslate"><span class="pre">matminer</span></code></a> package developed by scientists at UCB and LBL.
This package is actually quite popular as a general purpose <a class="reference external" href="https://hackingmaterials.lbl.gov/matminer/featurizer_summary.html">featurization tool</a>, and it will not only be great for teaching featurizations, but we also hope you will use it in your self-directed research projects.
One notable feature of matminer is that it mostly uses pandas DataFrames as inputs and outputs, which is great news for us!</p>
<p>As a quick aside, we wanted to wait until now to mention that matminer <a class="reference external" href="https://hackingmaterials.lbl.gov/matminer/dataset_summary.html">also has datasets</a> and <a class="reference external" href="https://hackingmaterials.lbl.gov/matminer/index.html#data-retrieval-easily-puts-complex-online-data-into-dataframes">database retrieval objects</a> that are pretty cool to look into if you want to explore more data mining on your own.
We won‚Äôt spend too much time discussing these tools, though we will utilize one below.</p>
<div class="section" id="featurizing-a-chemical-formula">
<h3>Featurizing a chemical formula<a class="headerlink" href="#featurizing-a-chemical-formula" title="Permalink to this headline">¬∂</a></h3>
<p>The first thing we can try is to take a chemical formula and enumerate a set of properties based on the formula.
This is appealing because chemical formulas seem like a fairly accessible property of the material (otherwise what did you even make??) and chemistry determines a lot of properties, so we‚Äôd like to leverage it.</p>
<p>To featurize a chemical formula that is represented as a string, we have to first convert it into a Pymatgen <a class="reference external" href="https://github.com/hackingmaterials/matminer/blob/main/matminer/featurizers/conversions.py"><code class="docutils literal notranslate"><span class="pre">Composition</span></code></a> object, which allows us to make sense of the elements present, subscripts, etc.
As you can imagine, matminer builds off of the functionality in Pymatgen. üòâ
To perform the actual conversion, we use the <a class="reference external" href="https://hackingmaterials.lbl.gov/matminer/matminer.featurizers.html#matminer.featurizers.conversions.StrToComposition"><code class="docutils literal notranslate"><span class="pre">StrToComposition</span></code></a> class from the <a class="reference external" href="https://hackingmaterials.lbl.gov/matminer/featurizer_summary.html#conversions"><code class="docutils literal notranslate"><span class="pre">matminer.featurizers.conversions</span></code></a> submodule, and this is called as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">matminer.featurizers.conversions</span> <span class="kn">import</span> <span class="n">StrToComposition</span>
<span class="n">str_comp</span> <span class="o">=</span> <span class="n">StrToComposition</span><span class="p">(</span><span class="n">target_col_id</span><span class="o">=</span><span class="s1">&#39;composition&#39;</span><span class="p">)</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">str_comp</span><span class="o">.</span><span class="n">featurize_dataframe</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">col_id</span><span class="o">=</span><span class="s1">&#39;formula&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>where:</p>
<ol class="simple">
<li><p>The first line is the package import statement.</p></li>
<li><p>The second line constructs the conversion object, and specifies that the <strong>new column</strong> holding the Composition will be named <code class="docutils literal notranslate"><span class="pre">'composition'</span></code>.</p></li>
<li><p>The third line performs the conversion (using <a class="reference external" href="https://hackingmaterials.lbl.gov/matminer/matminer.featurizers.html#matminer.featurizers.conversions.ConversionFeaturizer.featurize_dataframe"><code class="docutils literal notranslate"><span class="pre">featurize_dataframe(df,</span> <span class="pre">col_id)</span></code></a> and stores the output in a new DataFrame.
The <code class="docutils literal notranslate"><span class="pre">col_id</span></code> parameter says that the name of the <strong>existing column</strong> that holds the chemical formulas is named <code class="docutils literal notranslate"><span class="pre">'formula'</span></code>.</p></li>
</ol>
</div>
<div class="section" id="band-gap-data">
<h3>Band gap data<a class="headerlink" href="#band-gap-data" title="Permalink to this headline">¬∂</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">matminer.datasets</span> <span class="kn">import</span> <span class="n">load_dataset</span>
<span class="n">bg_data</span> <span class="o">=</span> <span class="n">load_dataset</span><span class="p">(</span><span class="s1">&#39;matbench_expt_gap&#39;</span><span class="p">)</span>
<span class="n">bg_data</span> <span class="o">=</span> <span class="n">bg_data</span><span class="p">[</span><span class="n">bg_data</span><span class="p">[</span><span class="s1">&#39;gap expt&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">reset_index</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>   <span class="c1"># just look at positive band gaps, trims dataset</span>
<span class="n">display</span><span class="p">(</span><span class="n">bg_data</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>                      <span class="c1"># pretty straightforward!</span>

<span class="kn">from</span> <span class="nn">matminer.featurizers.conversions</span> <span class="kn">import</span> <span class="n">StrToComposition</span>
<span class="n">str_to_comp</span> <span class="o">=</span> <span class="n">StrToComposition</span><span class="p">(</span><span class="n">target_col_id</span><span class="o">=</span><span class="s1">&#39;composition_pmg&#39;</span><span class="p">)</span>
<span class="n">bg_data_comp</span> <span class="o">=</span> <span class="n">str_to_comp</span><span class="o">.</span><span class="n">featurize_dataframe</span><span class="p">(</span><span class="n">bg_data</span><span class="p">,</span> <span class="n">col_id</span><span class="o">=</span><span class="s1">&#39;composition&#39;</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">bg_data_comp</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>composition</th>
      <th>gap expt</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Ag0.5Ge1Pb1.75S4</td>
      <td>1.83</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Ag0.5Ge1Pb1.75Se4</td>
      <td>1.51</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Ag2GeS3</td>
      <td>1.98</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Ag2GeSe3</td>
      <td>0.90</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Ag2HgI4</td>
      <td>2.47</td>
    </tr>
  </tbody>
</table>
</div></div><script type="application/vnd.jupyter.widget-view+json">
{"model_id": "23535520f31149f18c0fb129eceeb465", "version_major": 2, "version_minor": 0}
</script><div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>composition</th>
      <th>gap expt</th>
      <th>composition_pmg</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Ag0.5Ge1Pb1.75S4</td>
      <td>1.83</td>
      <td>(Ag, Ge, Pb, S)</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Ag0.5Ge1Pb1.75Se4</td>
      <td>1.51</td>
      <td>(Ag, Ge, Pb, Se)</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Ag2GeS3</td>
      <td>1.98</td>
      <td>(Ag, Ge, S)</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Ag2GeSe3</td>
      <td>0.90</td>
      <td>(Ag, Ge, Se)</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Ag2HgI4</td>
      <td>2.47</td>
      <td>(Ag, Hg, I)</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</div>
<div class="section" id="enumerating-elemental-properties">
<h3>Enumerating elemental properties<a class="headerlink" href="#enumerating-elemental-properties" title="Permalink to this headline">¬∂</a></h3>
<p>Once we have a column of Composition objects, we‚Äôre ready to perform the featurization!
We will use one of the featurizers from the <a class="reference external" href="https://hackingmaterials.lbl.gov/matminer/featurizer_summary.html#composition"><code class="docutils literal notranslate"><span class="pre">matminer.featurizers.composition</span></code></a> submodule, namely <a class="reference external" href="https://hackingmaterials.lbl.gov/matminer/matminer.featurizers.composition.html#matminer.featurizers.composition.composite.ElementProperty"><code class="docutils literal notranslate"><span class="pre">ElementProperty</span></code></a> (although there are many, <em>many</em> more).
For the <code class="docutils literal notranslate"><span class="pre">ElementProperty</span></code>, we will demonstrate the <a class="reference external" href="https://hackingmaterials.lbl.gov/matminer/matminer.featurizers.composition.html#matminer.featurizers.composition.composite.ElementProperty.from_preset"><code class="docutils literal notranslate"><span class="pre">featurizer.from_preset('magpie')</span></code></a> class method, which creates an object that can automatically engineer <strong>132 new features</strong> based on the method by <a class="reference external" href="https://www.nature.com/articles/npjcompumats201628">Ward et al. <em>npj Comput. Mater.</em>, 2016</a>. ü§Ø</p>
<p>The object from this class can then call the <a class="reference external" href="https://hackingmaterials.lbl.gov/matminer/matminer.featurizers.html#matminer.featurizers.base.BaseFeaturizer.featurize_dataframe"><code class="docutils literal notranslate"><span class="pre">featurize_dataframe(df,</span> <span class="pre">col_id='comp_col_name')</span></code></a> method to generate all the columns with features.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">matminer.featurizers.composition</span> <span class="kn">import</span> <span class="n">ElementProperty</span>
<span class="n">featurizer</span> <span class="o">=</span> <span class="n">ElementProperty</span><span class="o">.</span><span class="n">from_preset</span><span class="p">(</span><span class="s1">&#39;magpie&#39;</span><span class="p">)</span>
<span class="n">bg_data_featurized</span> <span class="o">=</span> <span class="n">featurizer</span><span class="o">.</span><span class="n">featurize_dataframe</span><span class="p">(</span><span class="n">bg_data_comp</span><span class="p">,</span> <span class="n">col_id</span><span class="o">=</span><span class="s1">&#39;composition_pmg&#39;</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">bg_data_featurized</span><span class="p">[</span><span class="s1">&#39;gap expt&#39;</span><span class="p">]</span>
<span class="n">bg_data_featurized</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<script type="application/vnd.jupyter.widget-view+json">
{"model_id": "eed49ecd7d1c49a2b8c82d2cc6e61cd0", "version_major": 2, "version_minor": 0}
</script><div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>composition</th>
      <th>gap expt</th>
      <th>composition_pmg</th>
      <th>MagpieData minimum Number</th>
      <th>MagpieData maximum Number</th>
      <th>MagpieData range Number</th>
      <th>MagpieData mean Number</th>
      <th>MagpieData avg_dev Number</th>
      <th>MagpieData mode Number</th>
      <th>MagpieData minimum MendeleevNumber</th>
      <th>MagpieData maximum MendeleevNumber</th>
      <th>MagpieData range MendeleevNumber</th>
      <th>MagpieData mean MendeleevNumber</th>
      <th>MagpieData avg_dev MendeleevNumber</th>
      <th>MagpieData mode MendeleevNumber</th>
      <th>MagpieData minimum AtomicWeight</th>
      <th>MagpieData maximum AtomicWeight</th>
      <th>MagpieData range AtomicWeight</th>
      <th>MagpieData mean AtomicWeight</th>
      <th>MagpieData avg_dev AtomicWeight</th>
      <th>MagpieData mode AtomicWeight</th>
      <th>MagpieData minimum MeltingT</th>
      <th>MagpieData maximum MeltingT</th>
      <th>MagpieData range MeltingT</th>
      <th>MagpieData mean MeltingT</th>
      <th>MagpieData avg_dev MeltingT</th>
      <th>MagpieData mode MeltingT</th>
      <th>MagpieData minimum Column</th>
      <th>MagpieData maximum Column</th>
      <th>MagpieData range Column</th>
      <th>MagpieData mean Column</th>
      <th>MagpieData avg_dev Column</th>
      <th>MagpieData mode Column</th>
      <th>MagpieData minimum Row</th>
      <th>MagpieData maximum Row</th>
      <th>MagpieData range Row</th>
      <th>MagpieData mean Row</th>
      <th>MagpieData avg_dev Row</th>
      <th>MagpieData mode Row</th>
      <th>MagpieData minimum CovalentRadius</th>
      <th>MagpieData maximum CovalentRadius</th>
      <th>MagpieData range CovalentRadius</th>
      <th>MagpieData mean CovalentRadius</th>
      <th>MagpieData avg_dev CovalentRadius</th>
      <th>MagpieData mode CovalentRadius</th>
      <th>MagpieData minimum Electronegativity</th>
      <th>MagpieData maximum Electronegativity</th>
      <th>MagpieData range Electronegativity</th>
      <th>MagpieData mean Electronegativity</th>
      <th>MagpieData avg_dev Electronegativity</th>
      <th>MagpieData mode Electronegativity</th>
      <th>MagpieData minimum NsValence</th>
      <th>MagpieData maximum NsValence</th>
      <th>MagpieData range NsValence</th>
      <th>MagpieData mean NsValence</th>
      <th>MagpieData avg_dev NsValence</th>
      <th>MagpieData mode NsValence</th>
      <th>MagpieData minimum NpValence</th>
      <th>MagpieData maximum NpValence</th>
      <th>MagpieData range NpValence</th>
      <th>MagpieData mean NpValence</th>
      <th>MagpieData avg_dev NpValence</th>
      <th>MagpieData mode NpValence</th>
      <th>MagpieData minimum NdValence</th>
      <th>MagpieData maximum NdValence</th>
      <th>MagpieData range NdValence</th>
      <th>MagpieData mean NdValence</th>
      <th>MagpieData avg_dev NdValence</th>
      <th>MagpieData mode NdValence</th>
      <th>MagpieData minimum NfValence</th>
      <th>MagpieData maximum NfValence</th>
      <th>MagpieData range NfValence</th>
      <th>MagpieData mean NfValence</th>
      <th>MagpieData avg_dev NfValence</th>
      <th>MagpieData mode NfValence</th>
      <th>MagpieData minimum NValence</th>
      <th>MagpieData maximum NValence</th>
      <th>MagpieData range NValence</th>
      <th>MagpieData mean NValence</th>
      <th>MagpieData avg_dev NValence</th>
      <th>MagpieData mode NValence</th>
      <th>MagpieData minimum NsUnfilled</th>
      <th>MagpieData maximum NsUnfilled</th>
      <th>MagpieData range NsUnfilled</th>
      <th>MagpieData mean NsUnfilled</th>
      <th>MagpieData avg_dev NsUnfilled</th>
      <th>MagpieData mode NsUnfilled</th>
      <th>MagpieData minimum NpUnfilled</th>
      <th>MagpieData maximum NpUnfilled</th>
      <th>MagpieData range NpUnfilled</th>
      <th>MagpieData mean NpUnfilled</th>
      <th>MagpieData avg_dev NpUnfilled</th>
      <th>MagpieData mode NpUnfilled</th>
      <th>MagpieData minimum NdUnfilled</th>
      <th>MagpieData maximum NdUnfilled</th>
      <th>MagpieData range NdUnfilled</th>
      <th>MagpieData mean NdUnfilled</th>
      <th>MagpieData avg_dev NdUnfilled</th>
      <th>MagpieData mode NdUnfilled</th>
      <th>MagpieData minimum NfUnfilled</th>
      <th>MagpieData maximum NfUnfilled</th>
      <th>MagpieData range NfUnfilled</th>
      <th>MagpieData mean NfUnfilled</th>
      <th>MagpieData avg_dev NfUnfilled</th>
      <th>MagpieData mode NfUnfilled</th>
      <th>MagpieData minimum NUnfilled</th>
      <th>MagpieData maximum NUnfilled</th>
      <th>MagpieData range NUnfilled</th>
      <th>MagpieData mean NUnfilled</th>
      <th>MagpieData avg_dev NUnfilled</th>
      <th>MagpieData mode NUnfilled</th>
      <th>MagpieData minimum GSvolume_pa</th>
      <th>MagpieData maximum GSvolume_pa</th>
      <th>MagpieData range GSvolume_pa</th>
      <th>MagpieData mean GSvolume_pa</th>
      <th>MagpieData avg_dev GSvolume_pa</th>
      <th>MagpieData mode GSvolume_pa</th>
      <th>MagpieData minimum GSbandgap</th>
      <th>MagpieData maximum GSbandgap</th>
      <th>MagpieData range GSbandgap</th>
      <th>MagpieData mean GSbandgap</th>
      <th>MagpieData avg_dev GSbandgap</th>
      <th>MagpieData mode GSbandgap</th>
      <th>MagpieData minimum GSmagmom</th>
      <th>MagpieData maximum GSmagmom</th>
      <th>MagpieData range GSmagmom</th>
      <th>MagpieData mean GSmagmom</th>
      <th>MagpieData avg_dev GSmagmom</th>
      <th>MagpieData mode GSmagmom</th>
      <th>MagpieData minimum SpaceGroupNumber</th>
      <th>MagpieData maximum SpaceGroupNumber</th>
      <th>MagpieData range SpaceGroupNumber</th>
      <th>MagpieData mean SpaceGroupNumber</th>
      <th>MagpieData avg_dev SpaceGroupNumber</th>
      <th>MagpieData mode SpaceGroupNumber</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Ag0.5Ge1Pb1.75S4</td>
      <td>1.83</td>
      <td>(Ag, Ge, Pb, S)</td>
      <td>16.0</td>
      <td>82.0</td>
      <td>66.0</td>
      <td>36.275862</td>
      <td>23.552913</td>
      <td>16.0</td>
      <td>65.0</td>
      <td>88.0</td>
      <td>23.0</td>
      <td>83.482759</td>
      <td>4.984542</td>
      <td>88.0</td>
      <td>32.0650</td>
      <td>207.2000</td>
      <td>175.1350</td>
      <td>85.163324</td>
      <td>62.045964</td>
      <td>32.06500</td>
      <td>388.36</td>
      <td>1234.93</td>
      <td>846.57</td>
      <td>611.499655</td>
      <td>251.480143</td>
      <td>388.36</td>
      <td>11.0</td>
      <td>16.0</td>
      <td>5.0</td>
      <td>14.896552</td>
      <td>1.217598</td>
      <td>16.0</td>
      <td>3.0</td>
      <td>6.0</td>
      <td>3.0</td>
      <td>4.000000</td>
      <td>1.103448</td>
      <td>3.0</td>
      <td>105.0</td>
      <td>146.0</td>
      <td>41.0</td>
      <td>119.724138</td>
      <td>16.247325</td>
      <td>105.0</td>
      <td>1.93</td>
      <td>2.58</td>
      <td>0.65</td>
      <td>2.396207</td>
      <td>0.202806</td>
      <td>2.58</td>
      <td>1.0</td>
      <td>2.0</td>
      <td>1.0</td>
      <td>1.931034</td>
      <td>0.128419</td>
      <td>2.0</td>
      <td>0.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>2.965517</td>
      <td>1.141498</td>
      <td>4.0</td>
      <td>0.0</td>
      <td>10.0</td>
      <td>10.0</td>
      <td>4.482759</td>
      <td>4.946492</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>14.0</td>
      <td>14.0</td>
      <td>3.37931</td>
      <td>5.127229</td>
      <td>0.0</td>
      <td>6.0</td>
      <td>28.0</td>
      <td>22.0</td>
      <td>12.758621</td>
      <td>7.700357</td>
      <td>6.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>0.068966</td>
      <td>0.128419</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>2.620690</td>
      <td>1.046373</td>
      <td>2.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>4.0</td>
      <td>3.0</td>
      <td>2.689655</td>
      <td>0.994055</td>
      <td>2.0</td>
      <td>16.33</td>
      <td>28.110000</td>
      <td>11.780000</td>
      <td>25.311724</td>
      <td>1.875196</td>
      <td>25.786875</td>
      <td>0.0</td>
      <td>2.202</td>
      <td>2.202</td>
      <td>1.267724</td>
      <td>1.030925</td>
      <td>2.202</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>70.0</td>
      <td>225.0</td>
      <td>155.0</td>
      <td>139.482759</td>
      <td>76.670630</td>
      <td>70.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Ag0.5Ge1Pb1.75Se4</td>
      <td>1.51</td>
      <td>(Ag, Ge, Pb, Se)</td>
      <td>32.0</td>
      <td>82.0</td>
      <td>50.0</td>
      <td>46.206897</td>
      <td>17.388823</td>
      <td>34.0</td>
      <td>65.0</td>
      <td>89.0</td>
      <td>24.0</td>
      <td>84.034483</td>
      <td>5.479191</td>
      <td>89.0</td>
      <td>72.6400</td>
      <td>207.2000</td>
      <td>134.5600</td>
      <td>111.036428</td>
      <td>46.423794</td>
      <td>78.96000</td>
      <td>494.00</td>
      <td>1234.93</td>
      <td>740.93</td>
      <td>669.783793</td>
      <td>227.362568</td>
      <td>494.00</td>
      <td>11.0</td>
      <td>16.0</td>
      <td>5.0</td>
      <td>14.896552</td>
      <td>1.217598</td>
      <td>16.0</td>
      <td>4.0</td>
      <td>6.0</td>
      <td>2.0</td>
      <td>4.551724</td>
      <td>0.760999</td>
      <td>4.0</td>
      <td>120.0</td>
      <td>146.0</td>
      <td>26.0</td>
      <td>128.000000</td>
      <td>11.034483</td>
      <td>120.0</td>
      <td>1.93</td>
      <td>2.55</td>
      <td>0.62</td>
      <td>2.379655</td>
      <td>0.187967</td>
      <td>2.55</td>
      <td>1.0</td>
      <td>2.0</td>
      <td>1.0</td>
      <td>1.931034</td>
      <td>0.128419</td>
      <td>2.0</td>
      <td>0.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>2.965517</td>
      <td>1.141498</td>
      <td>4.0</td>
      <td>10.0</td>
      <td>10.0</td>
      <td>0.0</td>
      <td>10.000000</td>
      <td>0.000000</td>
      <td>10.0</td>
      <td>0.0</td>
      <td>14.0</td>
      <td>14.0</td>
      <td>3.37931</td>
      <td>5.127229</td>
      <td>0.0</td>
      <td>11.0</td>
      <td>28.0</td>
      <td>17.0</td>
      <td>18.275862</td>
      <td>4.694411</td>
      <td>16.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>0.068966</td>
      <td>0.128419</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>2.620690</td>
      <td>1.046373</td>
      <td>2.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>4.0</td>
      <td>3.0</td>
      <td>2.689655</td>
      <td>0.994055</td>
      <td>2.0</td>
      <td>16.33</td>
      <td>28.110000</td>
      <td>11.780000</td>
      <td>25.385172</td>
      <td>1.905589</td>
      <td>25.920000</td>
      <td>0.0</td>
      <td>0.799</td>
      <td>0.799</td>
      <td>0.493655</td>
      <td>0.336932</td>
      <td>0.799</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>14.0</td>
      <td>225.0</td>
      <td>211.0</td>
      <td>108.586207</td>
      <td>104.370987</td>
      <td>14.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Ag2GeS3</td>
      <td>1.98</td>
      <td>(Ag, Ge, S)</td>
      <td>16.0</td>
      <td>47.0</td>
      <td>31.0</td>
      <td>29.000000</td>
      <td>13.000000</td>
      <td>16.0</td>
      <td>65.0</td>
      <td>88.0</td>
      <td>23.0</td>
      <td>78.833333</td>
      <td>9.222222</td>
      <td>88.0</td>
      <td>32.0650</td>
      <td>107.8682</td>
      <td>75.8032</td>
      <td>64.095233</td>
      <td>32.030233</td>
      <td>32.06500</td>
      <td>388.36</td>
      <td>1234.93</td>
      <td>846.57</td>
      <td>807.723333</td>
      <td>419.363333</td>
      <td>388.36</td>
      <td>11.0</td>
      <td>16.0</td>
      <td>5.0</td>
      <td>14.000000</td>
      <td>2.000000</td>
      <td>16.0</td>
      <td>3.0</td>
      <td>5.0</td>
      <td>2.0</td>
      <td>3.833333</td>
      <td>0.833333</td>
      <td>3.0</td>
      <td>105.0</td>
      <td>145.0</td>
      <td>40.0</td>
      <td>120.833333</td>
      <td>16.111111</td>
      <td>105.0</td>
      <td>1.93</td>
      <td>2.58</td>
      <td>0.65</td>
      <td>2.268333</td>
      <td>0.311667</td>
      <td>2.58</td>
      <td>1.0</td>
      <td>2.0</td>
      <td>1.0</td>
      <td>1.666667</td>
      <td>0.444444</td>
      <td>2.0</td>
      <td>0.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>2.333333</td>
      <td>1.666667</td>
      <td>4.0</td>
      <td>0.0</td>
      <td>10.0</td>
      <td>10.0</td>
      <td>5.000000</td>
      <td>5.000000</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.00000</td>
      <td>0.000000</td>
      <td>0.0</td>
      <td>6.0</td>
      <td>14.0</td>
      <td>8.0</td>
      <td>9.000000</td>
      <td>3.000000</td>
      <td>6.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>0.333333</td>
      <td>0.444444</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>1.666667</td>
      <td>1.111111</td>
      <td>2.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>4.0</td>
      <td>3.0</td>
      <td>2.000000</td>
      <td>0.666667</td>
      <td>2.0</td>
      <td>16.33</td>
      <td>25.786875</td>
      <td>9.456875</td>
      <td>22.170937</td>
      <td>3.893958</td>
      <td>25.786875</td>
      <td>0.0</td>
      <td>2.202</td>
      <td>2.202</td>
      <td>1.164833</td>
      <td>1.037167</td>
      <td>2.202</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>70.0</td>
      <td>225.0</td>
      <td>155.0</td>
      <td>147.500000</td>
      <td>77.500000</td>
      <td>70.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Ag2GeSe3</td>
      <td>0.90</td>
      <td>(Ag, Ge, Se)</td>
      <td>32.0</td>
      <td>47.0</td>
      <td>15.0</td>
      <td>38.000000</td>
      <td>6.000000</td>
      <td>34.0</td>
      <td>65.0</td>
      <td>89.0</td>
      <td>24.0</td>
      <td>79.333333</td>
      <td>9.666667</td>
      <td>89.0</td>
      <td>72.6400</td>
      <td>107.8682</td>
      <td>35.2282</td>
      <td>87.542733</td>
      <td>13.550311</td>
      <td>78.96000</td>
      <td>494.00</td>
      <td>1234.93</td>
      <td>740.93</td>
      <td>860.543333</td>
      <td>366.543333</td>
      <td>494.00</td>
      <td>11.0</td>
      <td>16.0</td>
      <td>5.0</td>
      <td>14.000000</td>
      <td>2.000000</td>
      <td>16.0</td>
      <td>4.0</td>
      <td>5.0</td>
      <td>1.0</td>
      <td>4.333333</td>
      <td>0.444444</td>
      <td>4.0</td>
      <td>120.0</td>
      <td>145.0</td>
      <td>25.0</td>
      <td>128.333333</td>
      <td>11.111111</td>
      <td>120.0</td>
      <td>1.93</td>
      <td>2.55</td>
      <td>0.62</td>
      <td>2.253333</td>
      <td>0.296667</td>
      <td>2.55</td>
      <td>1.0</td>
      <td>2.0</td>
      <td>1.0</td>
      <td>1.666667</td>
      <td>0.444444</td>
      <td>2.0</td>
      <td>0.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>2.333333</td>
      <td>1.666667</td>
      <td>4.0</td>
      <td>10.0</td>
      <td>10.0</td>
      <td>0.0</td>
      <td>10.000000</td>
      <td>0.000000</td>
      <td>10.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.00000</td>
      <td>0.000000</td>
      <td>0.0</td>
      <td>11.0</td>
      <td>16.0</td>
      <td>5.0</td>
      <td>14.000000</td>
      <td>2.000000</td>
      <td>16.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>0.333333</td>
      <td>0.444444</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>1.666667</td>
      <td>1.111111</td>
      <td>2.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>4.0</td>
      <td>3.0</td>
      <td>2.000000</td>
      <td>0.666667</td>
      <td>2.0</td>
      <td>16.33</td>
      <td>25.920000</td>
      <td>9.590000</td>
      <td>22.237500</td>
      <td>3.938333</td>
      <td>25.920000</td>
      <td>0.0</td>
      <td>0.799</td>
      <td>0.799</td>
      <td>0.463333</td>
      <td>0.335667</td>
      <td>0.799</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>14.0</td>
      <td>225.0</td>
      <td>211.0</td>
      <td>119.500000</td>
      <td>105.500000</td>
      <td>14.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Ag2HgI4</td>
      <td>2.47</td>
      <td>(Ag, Hg, I)</td>
      <td>47.0</td>
      <td>80.0</td>
      <td>33.0</td>
      <td>55.142857</td>
      <td>7.102041</td>
      <td>53.0</td>
      <td>65.0</td>
      <td>96.0</td>
      <td>31.0</td>
      <td>83.571429</td>
      <td>14.204082</td>
      <td>96.0</td>
      <td>107.8682</td>
      <td>200.5900</td>
      <td>92.7218</td>
      <td>131.992040</td>
      <td>19.599417</td>
      <td>126.90447</td>
      <td>234.32</td>
      <td>1234.93</td>
      <td>1000.61</td>
      <td>607.368571</td>
      <td>358.606531</td>
      <td>386.85</td>
      <td>11.0</td>
      <td>17.0</td>
      <td>6.0</td>
      <td>14.571429</td>
      <td>2.775510</td>
      <td>17.0</td>
      <td>5.0</td>
      <td>6.0</td>
      <td>1.0</td>
      <td>5.142857</td>
      <td>0.244898</td>
      <td>5.0</td>
      <td>132.0</td>
      <td>145.0</td>
      <td>13.0</td>
      <td>139.714286</td>
      <td>3.020408</td>
      <td>139.0</td>
      <td>1.93</td>
      <td>2.66</td>
      <td>0.73</td>
      <td>2.357143</td>
      <td>0.346122</td>
      <td>2.66</td>
      <td>1.0</td>
      <td>2.0</td>
      <td>1.0</td>
      <td>1.714286</td>
      <td>0.408163</td>
      <td>2.0</td>
      <td>0.0</td>
      <td>5.0</td>
      <td>5.0</td>
      <td>2.857143</td>
      <td>2.448980</td>
      <td>5.0</td>
      <td>10.0</td>
      <td>10.0</td>
      <td>0.0</td>
      <td>10.000000</td>
      <td>0.000000</td>
      <td>10.0</td>
      <td>0.0</td>
      <td>14.0</td>
      <td>14.0</td>
      <td>2.00000</td>
      <td>3.428571</td>
      <td>0.0</td>
      <td>11.0</td>
      <td>26.0</td>
      <td>15.0</td>
      <td>16.571429</td>
      <td>3.183673</td>
      <td>17.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>0.285714</td>
      <td>0.408163</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>0.571429</td>
      <td>0.489796</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>0.857143</td>
      <td>0.244898</td>
      <td>1.0</td>
      <td>16.33</td>
      <td>43.015000</td>
      <td>26.685000</td>
      <td>32.851084</td>
      <td>11.615904</td>
      <td>43.015000</td>
      <td>0.0</td>
      <td>1.062</td>
      <td>1.062</td>
      <td>0.606857</td>
      <td>0.520163</td>
      <td>1.062</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>64.0</td>
      <td>225.0</td>
      <td>161.0</td>
      <td>124.571429</td>
      <td>69.224490</td>
      <td>64.0</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p><strong>Pause and reflect</strong>: Do you recognize any of the column headings? Why are we taking the average, min, max, etc. of the elemental features?</p>
</div>
<div class="section" id="remove-correlated-features">
<h3>Remove correlated features<a class="headerlink" href="#remove-correlated-features" title="Permalink to this headline">¬∂</a></h3>
<p>So far we‚Äôve covered several best practices, such as scaling our input features for linear regression and performing cross validation to get a realistic assessment, and here we introduce one more.
Whenever we‚Äôre working with more than one feature, there is a chance that a few of them will be very strongly [linearly] correlated.
We‚Äôve already discussed what the Pearson correlation coefficient (<span class="math notranslate nohighlight">\(r\)</span>) means, and the reason this is undesirable is because the correlation can influence feature importance and potentially cause numerical instabilities during fitting.</p>
<div class="section" id="how-can-we-spot-these-correlations-and-remove-them-from-our-dataset">
<h4>How can we spot these correlations and remove them from our dataset?<a class="headerlink" href="#how-can-we-spot-these-correlations-and-remove-them-from-our-dataset" title="Permalink to this headline">¬∂</a></h4>
<p>You already know the answer to the first part, which is by plotting a heatmap!
Given a DataFrame, recall that we can compute the correlation between the columns using the <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.corr.html"><code class="docutils literal notranslate"><span class="pre">df.corr()</span></code></a> method.
Then we can plot a pretty heatmap. üòä</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">bg_data_featurized</span> <span class="o">=</span> <span class="n">bg_data_featurized</span><span class="o">.</span><span class="n">dropna</span><span class="p">(</span><span class="n">how</span><span class="o">=</span><span class="s1">&#39;any&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>   <span class="c1"># this removes columns w/ NaN</span>
<span class="n">corr_matrix</span> <span class="o">=</span> <span class="n">bg_data_featurized</span><span class="o">.</span><span class="n">corr</span><span class="p">()</span><span class="o">.</span><span class="n">abs</span><span class="p">()</span>   <span class="c1"># we take the absolute value</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">h</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">corr_matrix</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">h</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/features_blank_15_0.png" src="../../_images/features_blank_15_0.png" />
</div>
</div>
<p>Cool!
But maybe unlike the previous exercises where it was clear what each column and row represented, here there are just too many features involved.
And so, this calls for an <em>automated, programmatic approach</em>, which is what the following code does.
It removes the following columns:</p>
<ul class="simple">
<li><p>For any two features that have a correlation <span class="math notranslate nohighlight">\(|r| &gt; 0.95\)</span>, it removes one of them.</p></li>
<li><p>Any of the columns with more than 100 <code class="docutils literal notranslate"><span class="pre">0</span></code> values.
This means the feature is <code class="docutils literal notranslate"><span class="pre">0</span></code> for &gt; 95% of the data, and while it might not strictly speaking be necessary, we just won‚Äôt care about them here.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># get the upper triangular portion of correlation matrix, to avoid double counting/removing</span>
<span class="n">upper_tri</span> <span class="o">=</span> <span class="n">corr_matrix</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">triu</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="n">corr_matrix</span><span class="o">.</span><span class="n">shape</span><span class="p">),</span> <span class="n">k</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">bool</span><span class="p">))</span>

<span class="c1"># figure out which columns to drop</span>
<span class="n">to_drop</span> <span class="o">=</span> <span class="p">[</span><span class="n">column</span> <span class="k">for</span> <span class="n">column</span> <span class="ow">in</span> <span class="n">upper_tri</span><span class="o">.</span><span class="n">columns</span> <span class="k">if</span> <span class="nb">any</span><span class="p">(</span><span class="n">upper_tri</span><span class="p">[</span><span class="n">column</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mf">0.95</span><span class="p">)]</span>
<span class="n">to_drop</span> <span class="o">+=</span> <span class="nb">list</span><span class="p">(</span><span class="n">bg_data_featurized</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="n">bg_data_featurized</span><span class="o">.</span><span class="n">isin</span><span class="p">([</span><span class="mi">0</span><span class="p">])</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mi">100</span><span class="p">])</span>

<span class="c1"># drop those columns</span>
<span class="n">bg_data_cleaned</span> <span class="o">=</span> <span class="n">bg_data_featurized</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">to_drop</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">display</span><span class="p">(</span><span class="n">bg_data_cleaned</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>composition</th>
      <th>gap expt</th>
      <th>composition_pmg</th>
      <th>MagpieData minimum Number</th>
      <th>MagpieData maximum Number</th>
      <th>MagpieData range Number</th>
      <th>MagpieData mean Number</th>
      <th>MagpieData avg_dev Number</th>
      <th>MagpieData mode Number</th>
      <th>MagpieData minimum MendeleevNumber</th>
      <th>MagpieData maximum MendeleevNumber</th>
      <th>MagpieData mean MendeleevNumber</th>
      <th>MagpieData avg_dev MendeleevNumber</th>
      <th>MagpieData mode MendeleevNumber</th>
      <th>MagpieData minimum MeltingT</th>
      <th>MagpieData maximum MeltingT</th>
      <th>MagpieData range MeltingT</th>
      <th>MagpieData mean MeltingT</th>
      <th>MagpieData avg_dev MeltingT</th>
      <th>MagpieData mode MeltingT</th>
      <th>MagpieData maximum Column</th>
      <th>MagpieData mean Column</th>
      <th>MagpieData avg_dev Column</th>
      <th>MagpieData mode Column</th>
      <th>MagpieData maximum Row</th>
      <th>MagpieData range Row</th>
      <th>MagpieData avg_dev Row</th>
      <th>MagpieData minimum CovalentRadius</th>
      <th>MagpieData maximum CovalentRadius</th>
      <th>MagpieData range CovalentRadius</th>
      <th>MagpieData mean CovalentRadius</th>
      <th>MagpieData avg_dev CovalentRadius</th>
      <th>MagpieData mode CovalentRadius</th>
      <th>MagpieData minimum Electronegativity</th>
      <th>MagpieData maximum Electronegativity</th>
      <th>MagpieData range Electronegativity</th>
      <th>MagpieData mean Electronegativity</th>
      <th>MagpieData avg_dev Electronegativity</th>
      <th>MagpieData mode Electronegativity</th>
      <th>MagpieData minimum NsValence</th>
      <th>MagpieData maximum NsValence</th>
      <th>MagpieData mean NsValence</th>
      <th>MagpieData mode NsValence</th>
      <th>MagpieData maximum NpValence</th>
      <th>MagpieData range NpValence</th>
      <th>MagpieData mean NpValence</th>
      <th>MagpieData avg_dev NpValence</th>
      <th>MagpieData minimum NValence</th>
      <th>MagpieData maximum NValence</th>
      <th>MagpieData range NValence</th>
      <th>MagpieData mean NValence</th>
      <th>MagpieData avg_dev NValence</th>
      <th>MagpieData mode NValence</th>
      <th>MagpieData maximum NpUnfilled</th>
      <th>MagpieData range NpUnfilled</th>
      <th>MagpieData mean NpUnfilled</th>
      <th>MagpieData avg_dev NpUnfilled</th>
      <th>MagpieData maximum NUnfilled</th>
      <th>MagpieData mean NUnfilled</th>
      <th>MagpieData avg_dev NUnfilled</th>
      <th>MagpieData minimum GSvolume_pa</th>
      <th>MagpieData maximum GSvolume_pa</th>
      <th>MagpieData mean GSvolume_pa</th>
      <th>MagpieData avg_dev GSvolume_pa</th>
      <th>MagpieData mode GSvolume_pa</th>
      <th>MagpieData minimum SpaceGroupNumber</th>
      <th>MagpieData maximum SpaceGroupNumber</th>
      <th>MagpieData range SpaceGroupNumber</th>
      <th>MagpieData mean SpaceGroupNumber</th>
      <th>MagpieData avg_dev SpaceGroupNumber</th>
      <th>MagpieData mode SpaceGroupNumber</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Ag0.5Ge1Pb1.75S4</td>
      <td>1.83</td>
      <td>(Ag, Ge, Pb, S)</td>
      <td>16.0</td>
      <td>82.0</td>
      <td>66.0</td>
      <td>36.275862</td>
      <td>23.552913</td>
      <td>16.0</td>
      <td>65.0</td>
      <td>88.0</td>
      <td>83.482759</td>
      <td>4.984542</td>
      <td>88.0</td>
      <td>388.36</td>
      <td>1234.93</td>
      <td>846.57</td>
      <td>611.499655</td>
      <td>251.480143</td>
      <td>388.36</td>
      <td>16.0</td>
      <td>14.896552</td>
      <td>1.217598</td>
      <td>16.0</td>
      <td>6.0</td>
      <td>3.0</td>
      <td>1.103448</td>
      <td>105.0</td>
      <td>146.0</td>
      <td>41.0</td>
      <td>119.724138</td>
      <td>16.247325</td>
      <td>105.0</td>
      <td>1.93</td>
      <td>2.58</td>
      <td>0.65</td>
      <td>2.396207</td>
      <td>0.202806</td>
      <td>2.58</td>
      <td>1.0</td>
      <td>2.0</td>
      <td>1.931034</td>
      <td>2.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>2.965517</td>
      <td>1.141498</td>
      <td>6.0</td>
      <td>28.0</td>
      <td>22.0</td>
      <td>12.758621</td>
      <td>7.700357</td>
      <td>6.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>2.620690</td>
      <td>1.046373</td>
      <td>4.0</td>
      <td>2.689655</td>
      <td>0.994055</td>
      <td>16.33000</td>
      <td>28.110000</td>
      <td>25.311724</td>
      <td>1.875196</td>
      <td>25.786875</td>
      <td>70.0</td>
      <td>225.0</td>
      <td>155.0</td>
      <td>139.482759</td>
      <td>76.670630</td>
      <td>70.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Ag0.5Ge1Pb1.75Se4</td>
      <td>1.51</td>
      <td>(Ag, Ge, Pb, Se)</td>
      <td>32.0</td>
      <td>82.0</td>
      <td>50.0</td>
      <td>46.206897</td>
      <td>17.388823</td>
      <td>34.0</td>
      <td>65.0</td>
      <td>89.0</td>
      <td>84.034483</td>
      <td>5.479191</td>
      <td>89.0</td>
      <td>494.00</td>
      <td>1234.93</td>
      <td>740.93</td>
      <td>669.783793</td>
      <td>227.362568</td>
      <td>494.00</td>
      <td>16.0</td>
      <td>14.896552</td>
      <td>1.217598</td>
      <td>16.0</td>
      <td>6.0</td>
      <td>2.0</td>
      <td>0.760999</td>
      <td>120.0</td>
      <td>146.0</td>
      <td>26.0</td>
      <td>128.000000</td>
      <td>11.034483</td>
      <td>120.0</td>
      <td>1.93</td>
      <td>2.55</td>
      <td>0.62</td>
      <td>2.379655</td>
      <td>0.187967</td>
      <td>2.55</td>
      <td>1.0</td>
      <td>2.0</td>
      <td>1.931034</td>
      <td>2.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>2.965517</td>
      <td>1.141498</td>
      <td>11.0</td>
      <td>28.0</td>
      <td>17.0</td>
      <td>18.275862</td>
      <td>4.694411</td>
      <td>16.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>2.620690</td>
      <td>1.046373</td>
      <td>4.0</td>
      <td>2.689655</td>
      <td>0.994055</td>
      <td>16.33000</td>
      <td>28.110000</td>
      <td>25.385172</td>
      <td>1.905589</td>
      <td>25.920000</td>
      <td>14.0</td>
      <td>225.0</td>
      <td>211.0</td>
      <td>108.586207</td>
      <td>104.370987</td>
      <td>14.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Ag2GeS3</td>
      <td>1.98</td>
      <td>(Ag, Ge, S)</td>
      <td>16.0</td>
      <td>47.0</td>
      <td>31.0</td>
      <td>29.000000</td>
      <td>13.000000</td>
      <td>16.0</td>
      <td>65.0</td>
      <td>88.0</td>
      <td>78.833333</td>
      <td>9.222222</td>
      <td>88.0</td>
      <td>388.36</td>
      <td>1234.93</td>
      <td>846.57</td>
      <td>807.723333</td>
      <td>419.363333</td>
      <td>388.36</td>
      <td>16.0</td>
      <td>14.000000</td>
      <td>2.000000</td>
      <td>16.0</td>
      <td>5.0</td>
      <td>2.0</td>
      <td>0.833333</td>
      <td>105.0</td>
      <td>145.0</td>
      <td>40.0</td>
      <td>120.833333</td>
      <td>16.111111</td>
      <td>105.0</td>
      <td>1.93</td>
      <td>2.58</td>
      <td>0.65</td>
      <td>2.268333</td>
      <td>0.311667</td>
      <td>2.58</td>
      <td>1.0</td>
      <td>2.0</td>
      <td>1.666667</td>
      <td>2.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>2.333333</td>
      <td>1.666667</td>
      <td>6.0</td>
      <td>14.0</td>
      <td>8.0</td>
      <td>9.000000</td>
      <td>3.000000</td>
      <td>6.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>1.666667</td>
      <td>1.111111</td>
      <td>4.0</td>
      <td>2.000000</td>
      <td>0.666667</td>
      <td>16.33000</td>
      <td>25.786875</td>
      <td>22.170937</td>
      <td>3.893958</td>
      <td>25.786875</td>
      <td>70.0</td>
      <td>225.0</td>
      <td>155.0</td>
      <td>147.500000</td>
      <td>77.500000</td>
      <td>70.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Ag2GeSe3</td>
      <td>0.90</td>
      <td>(Ag, Ge, Se)</td>
      <td>32.0</td>
      <td>47.0</td>
      <td>15.0</td>
      <td>38.000000</td>
      <td>6.000000</td>
      <td>34.0</td>
      <td>65.0</td>
      <td>89.0</td>
      <td>79.333333</td>
      <td>9.666667</td>
      <td>89.0</td>
      <td>494.00</td>
      <td>1234.93</td>
      <td>740.93</td>
      <td>860.543333</td>
      <td>366.543333</td>
      <td>494.00</td>
      <td>16.0</td>
      <td>14.000000</td>
      <td>2.000000</td>
      <td>16.0</td>
      <td>5.0</td>
      <td>1.0</td>
      <td>0.444444</td>
      <td>120.0</td>
      <td>145.0</td>
      <td>25.0</td>
      <td>128.333333</td>
      <td>11.111111</td>
      <td>120.0</td>
      <td>1.93</td>
      <td>2.55</td>
      <td>0.62</td>
      <td>2.253333</td>
      <td>0.296667</td>
      <td>2.55</td>
      <td>1.0</td>
      <td>2.0</td>
      <td>1.666667</td>
      <td>2.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>2.333333</td>
      <td>1.666667</td>
      <td>11.0</td>
      <td>16.0</td>
      <td>5.0</td>
      <td>14.000000</td>
      <td>2.000000</td>
      <td>16.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>1.666667</td>
      <td>1.111111</td>
      <td>4.0</td>
      <td>2.000000</td>
      <td>0.666667</td>
      <td>16.33000</td>
      <td>25.920000</td>
      <td>22.237500</td>
      <td>3.938333</td>
      <td>25.920000</td>
      <td>14.0</td>
      <td>225.0</td>
      <td>211.0</td>
      <td>119.500000</td>
      <td>105.500000</td>
      <td>14.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Ag2HgI4</td>
      <td>2.47</td>
      <td>(Ag, Hg, I)</td>
      <td>47.0</td>
      <td>80.0</td>
      <td>33.0</td>
      <td>55.142857</td>
      <td>7.102041</td>
      <td>53.0</td>
      <td>65.0</td>
      <td>96.0</td>
      <td>83.571429</td>
      <td>14.204082</td>
      <td>96.0</td>
      <td>234.32</td>
      <td>1234.93</td>
      <td>1000.61</td>
      <td>607.368571</td>
      <td>358.606531</td>
      <td>386.85</td>
      <td>17.0</td>
      <td>14.571429</td>
      <td>2.775510</td>
      <td>17.0</td>
      <td>6.0</td>
      <td>1.0</td>
      <td>0.244898</td>
      <td>132.0</td>
      <td>145.0</td>
      <td>13.0</td>
      <td>139.714286</td>
      <td>3.020408</td>
      <td>139.0</td>
      <td>1.93</td>
      <td>2.66</td>
      <td>0.73</td>
      <td>2.357143</td>
      <td>0.346122</td>
      <td>2.66</td>
      <td>1.0</td>
      <td>2.0</td>
      <td>1.714286</td>
      <td>2.0</td>
      <td>5.0</td>
      <td>5.0</td>
      <td>2.857143</td>
      <td>2.448980</td>
      <td>11.0</td>
      <td>26.0</td>
      <td>15.0</td>
      <td>16.571429</td>
      <td>3.183673</td>
      <td>17.0</td>
      <td>1.0</td>
      <td>1.0</td>
      <td>0.571429</td>
      <td>0.489796</td>
      <td>1.0</td>
      <td>0.857143</td>
      <td>0.244898</td>
      <td>16.33000</td>
      <td>43.015000</td>
      <td>32.851084</td>
      <td>11.615904</td>
      <td>43.015000</td>
      <td>64.0</td>
      <td>225.0</td>
      <td>161.0</td>
      <td>124.571429</td>
      <td>69.224490</td>
      <td>64.0</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>2149</th>
      <td>ZrNiSb</td>
      <td>0.55</td>
      <td>(Zr, Ni, Sb)</td>
      <td>28.0</td>
      <td>51.0</td>
      <td>23.0</td>
      <td>39.666667</td>
      <td>7.777778</td>
      <td>28.0</td>
      <td>44.0</td>
      <td>85.0</td>
      <td>63.333333</td>
      <td>14.444444</td>
      <td>44.0</td>
      <td>903.78</td>
      <td>2128.00</td>
      <td>1224.22</td>
      <td>1586.593333</td>
      <td>455.208889</td>
      <td>903.78</td>
      <td>15.0</td>
      <td>9.666667</td>
      <td>3.777778</td>
      <td>4.0</td>
      <td>5.0</td>
      <td>1.0</td>
      <td>0.444444</td>
      <td>124.0</td>
      <td>175.0</td>
      <td>51.0</td>
      <td>146.000000</td>
      <td>19.333333</td>
      <td>124.0</td>
      <td>1.33</td>
      <td>2.05</td>
      <td>0.72</td>
      <td>1.763333</td>
      <td>0.288889</td>
      <td>1.33</td>
      <td>2.0</td>
      <td>2.0</td>
      <td>2.000000</td>
      <td>2.0</td>
      <td>3.0</td>
      <td>3.0</td>
      <td>1.000000</td>
      <td>1.333333</td>
      <td>4.0</td>
      <td>15.0</td>
      <td>11.0</td>
      <td>9.666667</td>
      <td>3.777778</td>
      <td>4.0</td>
      <td>3.0</td>
      <td>3.0</td>
      <td>1.000000</td>
      <td>1.333333</td>
      <td>8.0</td>
      <td>4.333333</td>
      <td>2.444444</td>
      <td>10.32000</td>
      <td>31.560000</td>
      <td>21.691667</td>
      <td>7.581111</td>
      <td>10.320000</td>
      <td>166.0</td>
      <td>225.0</td>
      <td>59.0</td>
      <td>195.000000</td>
      <td>20.000000</td>
      <td>166.0</td>
    </tr>
    <tr>
      <th>2150</th>
      <td>ZrO2</td>
      <td>4.99</td>
      <td>(Zr, O)</td>
      <td>8.0</td>
      <td>40.0</td>
      <td>32.0</td>
      <td>18.666667</td>
      <td>14.222222</td>
      <td>8.0</td>
      <td>44.0</td>
      <td>87.0</td>
      <td>72.666667</td>
      <td>19.111111</td>
      <td>87.0</td>
      <td>54.80</td>
      <td>2128.00</td>
      <td>2073.20</td>
      <td>745.866667</td>
      <td>921.422222</td>
      <td>54.80</td>
      <td>16.0</td>
      <td>12.000000</td>
      <td>5.333333</td>
      <td>16.0</td>
      <td>5.0</td>
      <td>3.0</td>
      <td>1.333333</td>
      <td>66.0</td>
      <td>175.0</td>
      <td>109.0</td>
      <td>102.333333</td>
      <td>48.444444</td>
      <td>66.0</td>
      <td>1.33</td>
      <td>3.44</td>
      <td>2.11</td>
      <td>2.736667</td>
      <td>0.937778</td>
      <td>3.44</td>
      <td>2.0</td>
      <td>2.0</td>
      <td>2.000000</td>
      <td>2.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>2.666667</td>
      <td>1.777778</td>
      <td>4.0</td>
      <td>6.0</td>
      <td>2.0</td>
      <td>5.333333</td>
      <td>0.888889</td>
      <td>6.0</td>
      <td>2.0</td>
      <td>2.0</td>
      <td>1.333333</td>
      <td>0.888889</td>
      <td>8.0</td>
      <td>4.000000</td>
      <td>2.666667</td>
      <td>9.10500</td>
      <td>23.195000</td>
      <td>13.801667</td>
      <td>6.262222</td>
      <td>9.105000</td>
      <td>12.0</td>
      <td>194.0</td>
      <td>182.0</td>
      <td>72.666667</td>
      <td>80.888889</td>
      <td>12.0</td>
    </tr>
    <tr>
      <th>2151</th>
      <td>ZrS2</td>
      <td>2.75</td>
      <td>(Zr, S)</td>
      <td>16.0</td>
      <td>40.0</td>
      <td>24.0</td>
      <td>24.000000</td>
      <td>10.666667</td>
      <td>16.0</td>
      <td>44.0</td>
      <td>88.0</td>
      <td>73.333333</td>
      <td>19.555556</td>
      <td>88.0</td>
      <td>388.36</td>
      <td>2128.00</td>
      <td>1739.64</td>
      <td>968.240000</td>
      <td>773.173333</td>
      <td>388.36</td>
      <td>16.0</td>
      <td>12.000000</td>
      <td>5.333333</td>
      <td>16.0</td>
      <td>5.0</td>
      <td>2.0</td>
      <td>0.888889</td>
      <td>105.0</td>
      <td>175.0</td>
      <td>70.0</td>
      <td>128.333333</td>
      <td>31.111111</td>
      <td>105.0</td>
      <td>1.33</td>
      <td>2.58</td>
      <td>1.25</td>
      <td>2.163333</td>
      <td>0.555556</td>
      <td>2.58</td>
      <td>2.0</td>
      <td>2.0</td>
      <td>2.000000</td>
      <td>2.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>2.666667</td>
      <td>1.777778</td>
      <td>4.0</td>
      <td>6.0</td>
      <td>2.0</td>
      <td>5.333333</td>
      <td>0.888889</td>
      <td>6.0</td>
      <td>2.0</td>
      <td>2.0</td>
      <td>1.333333</td>
      <td>0.888889</td>
      <td>8.0</td>
      <td>4.000000</td>
      <td>2.666667</td>
      <td>23.19500</td>
      <td>25.786875</td>
      <td>24.922917</td>
      <td>1.151944</td>
      <td>25.786875</td>
      <td>70.0</td>
      <td>194.0</td>
      <td>124.0</td>
      <td>111.333333</td>
      <td>55.111111</td>
      <td>70.0</td>
    </tr>
    <tr>
      <th>2152</th>
      <td>ZrSe2</td>
      <td>2.00</td>
      <td>(Zr, Se)</td>
      <td>34.0</td>
      <td>40.0</td>
      <td>6.0</td>
      <td>36.000000</td>
      <td>2.666667</td>
      <td>34.0</td>
      <td>44.0</td>
      <td>89.0</td>
      <td>74.000000</td>
      <td>20.000000</td>
      <td>89.0</td>
      <td>494.00</td>
      <td>2128.00</td>
      <td>1634.00</td>
      <td>1038.666667</td>
      <td>726.222222</td>
      <td>494.00</td>
      <td>16.0</td>
      <td>12.000000</td>
      <td>5.333333</td>
      <td>16.0</td>
      <td>5.0</td>
      <td>1.0</td>
      <td>0.444444</td>
      <td>120.0</td>
      <td>175.0</td>
      <td>55.0</td>
      <td>138.333333</td>
      <td>24.444444</td>
      <td>120.0</td>
      <td>1.33</td>
      <td>2.55</td>
      <td>1.22</td>
      <td>2.143333</td>
      <td>0.542222</td>
      <td>2.55</td>
      <td>2.0</td>
      <td>2.0</td>
      <td>2.000000</td>
      <td>2.0</td>
      <td>4.0</td>
      <td>4.0</td>
      <td>2.666667</td>
      <td>1.777778</td>
      <td>4.0</td>
      <td>16.0</td>
      <td>12.0</td>
      <td>12.000000</td>
      <td>5.333333</td>
      <td>16.0</td>
      <td>2.0</td>
      <td>2.0</td>
      <td>1.333333</td>
      <td>0.888889</td>
      <td>8.0</td>
      <td>4.000000</td>
      <td>2.666667</td>
      <td>23.19500</td>
      <td>25.920000</td>
      <td>25.011667</td>
      <td>1.211111</td>
      <td>25.920000</td>
      <td>14.0</td>
      <td>194.0</td>
      <td>180.0</td>
      <td>74.000000</td>
      <td>80.000000</td>
      <td>14.0</td>
    </tr>
    <tr>
      <th>2153</th>
      <td>ZrTaN3</td>
      <td>1.72</td>
      <td>(Zr, Ta, N)</td>
      <td>7.0</td>
      <td>73.0</td>
      <td>66.0</td>
      <td>26.800000</td>
      <td>23.760000</td>
      <td>7.0</td>
      <td>44.0</td>
      <td>82.0</td>
      <td>67.600000</td>
      <td>17.280000</td>
      <td>82.0</td>
      <td>63.05</td>
      <td>3290.00</td>
      <td>3226.95</td>
      <td>1121.430000</td>
      <td>1270.056000</td>
      <td>63.05</td>
      <td>15.0</td>
      <td>10.800000</td>
      <td>5.040000</td>
      <td>15.0</td>
      <td>6.0</td>
      <td>4.0</td>
      <td>1.680000</td>
      <td>71.0</td>
      <td>175.0</td>
      <td>104.0</td>
      <td>111.600000</td>
      <td>48.720000</td>
      <td>71.0</td>
      <td>1.33</td>
      <td>3.04</td>
      <td>1.71</td>
      <td>2.390000</td>
      <td>0.780000</td>
      <td>3.04</td>
      <td>2.0</td>
      <td>2.0</td>
      <td>2.000000</td>
      <td>2.0</td>
      <td>3.0</td>
      <td>3.0</td>
      <td>1.800000</td>
      <td>1.440000</td>
      <td>4.0</td>
      <td>19.0</td>
      <td>15.0</td>
      <td>7.600000</td>
      <td>4.560000</td>
      <td>5.0</td>
      <td>3.0</td>
      <td>3.0</td>
      <td>1.800000</td>
      <td>1.440000</td>
      <td>8.0</td>
      <td>4.800000</td>
      <td>2.160000</td>
      <td>14.76875</td>
      <td>23.195000</td>
      <td>17.124250</td>
      <td>2.826600</td>
      <td>14.768750</td>
      <td>194.0</td>
      <td>229.0</td>
      <td>35.0</td>
      <td>201.000000</td>
      <td>11.200000</td>
      <td>194.0</td>
    </tr>
  </tbody>
</table>
<p>2154 rows √ó 71 columns</p>
</div></div></div>
</div>
</div>
</div>
<div class="section" id="finally-finally-finally-build-the-ml-model-for-cv">
<h3>Finally, finally, <em>finally</em> build the ML model for CV<a class="headerlink" href="#finally-finally-finally-build-the-ml-model-for-cv" title="Permalink to this headline">¬∂</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">lr</span> <span class="o">=</span> <span class="n">LinearRegression</span><span class="p">()</span>
<span class="n">kfold</span> <span class="o">=</span> <span class="n">KFold</span><span class="p">(</span><span class="n">n_splits</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">shuffle</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">scaler</span> <span class="o">=</span> <span class="n">StandardScaler</span><span class="p">()</span>

<span class="c1"># only get the features (not the compositions, and certainly not the bandgap values!)</span>
<span class="n">X</span> <span class="o">=</span> <span class="n">bg_data_cleaned</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="n">featurizer</span><span class="o">.</span><span class="n">feature_labels</span><span class="p">()[</span><span class="mi">0</span><span class="p">]:]</span>
<span class="n">X_scaled</span> <span class="o">=</span> <span class="n">scaler</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">X</span><span class="p">)</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">bg_data_cleaned</span><span class="p">[</span><span class="s1">&#39;gap expt&#39;</span><span class="p">]</span>

<span class="c1"># run cross validations AND store the predict values</span>
<span class="n">yhat</span> <span class="o">=</span> <span class="n">cross_val_predict</span><span class="p">(</span><span class="n">lr</span><span class="p">,</span> <span class="n">X_scaled</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">cv</span><span class="o">=</span><span class="n">kfold</span><span class="p">)</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>
<span class="n">ax</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">yhat</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="mi">40</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="s1">&#39;k&#39;</span><span class="p">,</span> <span class="n">zorder</span><span class="o">=-</span><span class="mi">5</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;actual band gap (eV)&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;predicted band gap (eV)&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">13</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="mi">13</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/features_blank_19_0.png" src="../../_images/features_blank_19_0.png" />
</div>
</div>
<div class="alert alert-block alert-warning">
    <center><b>~ BREAK ~</b></center>
    At this point, we're going to give ourselves a short break before continuing further.
    Great work so far! üí™
</div></div>
</div>
<div class="section" id="model-complexity">
<h2>Model complexity<a class="headerlink" href="#model-complexity" title="Permalink to this headline">¬∂</a></h2>
<p><a class="reference external" href="#Contents">Back to top</a></p>
<p>Wow, this featurization strategy is pretty cool, even if the new features can‚Äôt perfectly predict experimental band gaps.
At least now we have an automated way to generate a bunch of physically-meaningful and interpretable features from the chemical formula, and it‚Äôs conceivable that we can add <em>even more features</em> from matminer or other packages/datasets, particularly if we account for the crystal structure.</p>
<p>But, if we continued in this way of blindly generating more and more features for ML, hoping to improve our model performance, then we‚Äôd actually fall for a trap! üï≥
Note that each time we add a feature, at least for linear regression, we also add a parameter (another coefficient) to the linear regression model.
The addition of another parameter adds another degree of freedom that we must optimize for and increases the <strong>model complexity</strong>.</p>
<p>It is true that a more complex model should be able to learn more nuances <em>in the data that it was trained on</em>.
Hence, a more complex model will generally have lower <strong>training error</strong> than a simpler model (fewer parameters).
After all, physicist John von Neumann has <a class="reference external" href="https://www.nature.com/articles/427297a">famously said</a>, ‚ÄúWith four parameters I can fit an elephant, and with five I can make him wiggle his trunk.‚Äù üêò</p>
<p>But what about <em>unseen data</em>, like the validation set in <span class="math notranslate nohighlight">\(k\)</span>-fold CV?
If our model is a really complex polynomial and we have noisy or irregular data (always true in materials science), then it might not be a good approximation for new data, even when that data is an <em>interpolation</em> rather than <em>extrapolation</em> (where it would presumably do even worse).
Thus at some point, <strong>the validation error will begin to increase</strong> with model complexity, <em>even as the training error continues to decrease</em>.
At this point we say the model has started to <strong>overfit</strong> to the training data, and before this point, we might say the model is <strong>underfitting</strong>.
At the point where validation error bottoms out is the Goldilocks sweet spot. üêª</p>
<p>The code below illustrates this point by performing linear regression with increasingly complex polynomial features and plotting (a) the model on the left, and (b) the training and validation errors on the right.
Note that we wrote several helper functions in a separate file to remove some of the clutter.
For example, <code class="docutils literal notranslate"><span class="pre">gen_data()</span></code> is not some ‚Äúwell-known‚Äù function available everywhere; it was hard-coded for this example.
Nonetheless, by revealing most of the important details, we hope to prove that we are not ‚Äúgaming‚Äù anything.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">helper_funcs_04</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c1"># generate some data</span>
<span class="n">dom</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">1000</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
<span class="n">X_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">,</span> <span class="n">X_test</span><span class="p">,</span> <span class="n">y_test</span> <span class="o">=</span> <span class="n">gen_data</span><span class="p">(</span><span class="n">dom</span><span class="p">)</span>

<span class="c1"># create plot objects and initial points on left side</span>
<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">nrows</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">ncols</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">17</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">X_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;training pts&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">X_test</span><span class="p">,</span> <span class="n">y_test</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;test pts&#39;</span><span class="p">)</span>

<span class="c1"># loop through increasingly complex models</span>
<span class="n">train_errs</span><span class="p">,</span> <span class="n">val_errs</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[]</span>
<span class="n">degree</span> <span class="o">=</span> <span class="mi">8</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">degree</span><span class="p">):</span>

    <span class="c1"># ML fitting helper function - return model and errors</span>
    <span class="n">y_fit</span><span class="p">,</span> <span class="n">train_err</span><span class="p">,</span> <span class="n">val_err</span> <span class="o">=</span> <span class="n">ml_fitting</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">dom</span><span class="p">,</span> <span class="n">X_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">,</span> <span class="n">X_test</span><span class="p">,</span> <span class="n">y_test</span><span class="p">)</span>
    <span class="n">train_errs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">train_err</span><span class="p">)</span>
    <span class="n">val_errs</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">val_err</span><span class="p">)</span>
    
    <span class="c1"># plot the low-degree polynomials for illustration on left side</span>
    <span class="k">if</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="p">:</span>
        <span class="n">ax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">dom</span><span class="p">,</span> <span class="n">y_fit</span><span class="p">,</span> <span class="n">lw</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;degree </span><span class="si">{</span><span class="n">i</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="sa">f</span><span class="s1">&#39;C</span><span class="si">{</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="c1"># plots errors on the right and some nice styling</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">degree</span><span class="p">),</span> <span class="n">train_errs</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;training error&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">1</span> <span class="p">,</span><span class="n">degree</span><span class="p">),</span> <span class="n">val_errs</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;validation error&#39;</span><span class="p">)</span>
<span class="n">plot_styling</span><span class="p">(</span><span class="n">ax</span><span class="p">,</span> <span class="n">degree</span><span class="p">)</span>
<span class="c1"># fig.savefig(&#39;../../assets/fig/week_1/04/model_complexity.png&#39;)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../../_images/features_blank_22_0.png" src="../../_images/features_blank_22_0.png" />
</div>
</div>
</div>
<div class="section" id="feature-selection">
<h2>Feature selection<a class="headerlink" href="#feature-selection" title="Permalink to this headline">¬∂</a></h2>
<p><a class="reference external" href="#Contents">Back to top</a></p>
<p>While the previous example used a non-materials example, we hope you‚Äôll believe us when we say that it happens with materials data too, more often than we would like. üò¢
Therefore, we need a way to be able to perform <strong>feature selection</strong> after we have finished generating all of our features using matminer.</p>
<p>Once again, scikit-learn generously provides many built-in feature selection classes in the <a class="reference external" href="https://scikit-learn.org/stable/modules/feature_selection.html"><code class="docutils literal notranslate"><span class="pre">sklearn.feature_selection</span></code></a> module.
We‚Äôre going to go ahead and use a rather simple <a class="reference external" href="https://scikit-learn.org/stable/modules/feature_selection.html#univariate-feature-selection">univariate feature selection</a> tool called <a class="reference external" href="https://scikit-learn.org/stable/modules/generated/sklearn.feature_selection.SelectKBest.html"><code class="docutils literal notranslate"><span class="pre">SelectKBest(score_func,</span> <span class="pre">k)</span></code></a> that has the following parameters:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">score_func</span></code>: A scoring function callable that, for regression tasks, can either be <a class="reference external" href="https://scikit-learn.org/stable/modules/generated/sklearn.feature_selection.f_regression.html"><code class="docutils literal notranslate"><span class="pre">f_regression</span></code></a> or <a class="reference external" href="https://scikit-learn.org/stable/modules/generated/sklearn.feature_selection.mutual_info_regression.html"><code class="docutils literal notranslate"><span class="pre">mutual_info_regression</span></code></a>.
These are functions imported from the <code class="docutils literal notranslate"><span class="pre">sklearn.feature_selection</span></code> module, and as callables we only need to write their name <em>without parentheses</em> to the function arguments.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">k</span></code>: An <code class="docutils literal notranslate"><span class="pre">int</span></code> for the number of top features to select.</p></li>
</ul>
<p><strong>Pause and reflect</strong>: How do we find the optimal value of <code class="docutils literal notranslate"><span class="pre">k</span></code>?</p>
<div class="section" id="exercise-apply-feature-selection-to-the-band-gap-prediction-problem-and-identify-the-top-10-features">
<h3>Exercise: apply feature selection to the band gap prediction problem and identify the top 10 features.<a class="headerlink" href="#exercise-apply-feature-selection-to-the-band-gap-prediction-problem-and-identify-the-top-10-features" title="Permalink to this headline">¬∂</a></h3>
<p>If you didn‚Äôt change anything, the featurized data should be stored in <code class="docutils literal notranslate"><span class="pre">X</span></code>.</p>
<p><strong>Challenge</strong>: Can you then use only those 10 features to build a linear regression model?
Does the model perform better or worse?</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sklearn.feature_selection</span> <span class="kn">import</span> <span class="n">SelectKBest</span><span class="p">,</span> <span class="n">f_regression</span><span class="p">,</span> <span class="n">mutual_info_regression</span>
<span class="n">selector</span> <span class="o">=</span> <span class="n">SelectKBest</span><span class="p">(</span><span class="n">score_func</span><span class="o">=</span><span class="n">f_regression</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
<span class="n">selector_fitted</span> <span class="o">=</span> <span class="n">selector</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
<span class="n">selected_indices</span> <span class="o">=</span> <span class="n">selector_fitted</span><span class="o">.</span><span class="n">get_support</span><span class="p">(</span><span class="n">indices</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">selected_indices</span><span class="p">)</span>
<span class="c1"># -------------   WRITE YOUR CODE IN THE SPACE BELOW   ---------- #</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[ True False False  True False  True False False False False False False
 False False False False False False False False False False False False
  True False False  True False  True False  True  True False  True False
 False False False False False False False False False False False  True
 False False False False False False False False False False False False
 False False False False False False False False]
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="conclusion">
<h2>Conclusion<a class="headerlink" href="#conclusion" title="Permalink to this headline">¬∂</a></h2>
<p>Congratulations on making it to the end! üéâüëè</p>
<p>There is a lot of information that we covered in this notebook, so it‚Äôs totally reasonable if not everything clicked right away and you find yourself needing to revist these concepts.</p>
<p>Please don‚Äôt hesitate to reach out on Slack if you have questions or concerns.</p>
</div>
</div>


<script type="application/vnd.jupyter.widget-state+json">
{"state": {"04a19ae1d4fe46f28f9560737724d3f0": {"model_module": "@jupyter-widgets/controls", "model_module_version": "1.5.0", "model_name": "HTMLModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "1.5.0", "_model_name": "HTMLModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "1.5.0", "_view_name": "HTMLView", "description": "", "description_tooltip": null, "layout": "IPY_MODEL_432dbf3bc8a64ad5ae70f100fe42022e", "placeholder": "\u200b", "style": "IPY_MODEL_5a2bc619778d467e97d076f4fd32a882", "value": "StrToComposition: 100%"}}, "090c45f7608a406fa78ae50f141d7c57": {"model_module": "@jupyter-widgets/base", "model_module_version": "1.2.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "1.2.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "overflow_x": null, "overflow_y": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "0fcba7b529e547cca87f9dfb6a94572f": {"model_module": "@jupyter-widgets/base", "model_module_version": "1.2.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "1.2.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "overflow_x": null, "overflow_y": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "18a70d0e226f492da782dd7174a7131b": {"model_module": "@jupyter-widgets/controls", "model_module_version": "1.5.0", "model_name": "DescriptionStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "1.5.0", "_model_name": "DescriptionStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "StyleView", "description_width": ""}}, "1f0eb00bb5c74942bca5b0ca48860897": {"model_module": "@jupyter-widgets/controls", "model_module_version": "1.5.0", "model_name": "HTMLModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "1.5.0", "_model_name": "HTMLModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "1.5.0", "_view_name": "HTMLView", "description": "", "description_tooltip": null, "layout": "IPY_MODEL_7d10bf23ba2c4667977efbf7ec238f99", "placeholder": "\u200b", "style": "IPY_MODEL_ce7439bf16da48c085c6a7c840ff9bbe", "value": " 2154/2154 [00:07&lt;00:00, 404.82it/s]"}}, "23535520f31149f18c0fb129eceeb465": {"model_module": "@jupyter-widgets/controls", "model_module_version": "1.5.0", "model_name": "HBoxModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "1.5.0", "_model_name": "HBoxModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "1.5.0", "_view_name": "HBoxView", "box_style": "", "children": ["IPY_MODEL_04a19ae1d4fe46f28f9560737724d3f0", "IPY_MODEL_39ea6cbb18f142098804d5367df04b06", "IPY_MODEL_eae00ef9fc3744f19789da1287199b09"], "layout": "IPY_MODEL_a693643bcb3042a18ae073646da8dff8"}}, "39ea6cbb18f142098804d5367df04b06": {"model_module": "@jupyter-widgets/controls", "model_module_version": "1.5.0", "model_name": "FloatProgressModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "1.5.0", "_model_name": "FloatProgressModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "1.5.0", "_view_name": "ProgressView", "bar_style": "success", "description": "", "description_tooltip": null, "layout": "IPY_MODEL_8e58a21a1bfa4bf88b8a3524b4b1845d", "max": 2154.0, "min": 0.0, "orientation": "horizontal", "style": "IPY_MODEL_94144dc280ac40b883a40b64a3baea18", "value": 2154.0}}, "432dbf3bc8a64ad5ae70f100fe42022e": {"model_module": "@jupyter-widgets/base", "model_module_version": "1.2.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "1.2.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "overflow_x": null, "overflow_y": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "497fc24721ff40a193ae12f691594ee1": {"model_module": "@jupyter-widgets/base", "model_module_version": "1.2.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "1.2.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "overflow_x": null, "overflow_y": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "5a2bc619778d467e97d076f4fd32a882": {"model_module": "@jupyter-widgets/controls", "model_module_version": "1.5.0", "model_name": "DescriptionStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "1.5.0", "_model_name": "DescriptionStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "StyleView", "description_width": ""}}, "7d10bf23ba2c4667977efbf7ec238f99": {"model_module": "@jupyter-widgets/base", "model_module_version": "1.2.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "1.2.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "overflow_x": null, "overflow_y": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "8b384895689149e8a24bd317a44a2fbe": {"model_module": "@jupyter-widgets/controls", "model_module_version": "1.5.0", "model_name": "HTMLModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "1.5.0", "_model_name": "HTMLModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "1.5.0", "_view_name": "HTMLView", "description": "", "description_tooltip": null, "layout": "IPY_MODEL_c29a93a4d2f24975b52c1682d607a097", "placeholder": "\u200b", "style": "IPY_MODEL_18a70d0e226f492da782dd7174a7131b", "value": "ElementProperty: 100%"}}, "8e58a21a1bfa4bf88b8a3524b4b1845d": {"model_module": "@jupyter-widgets/base", "model_module_version": "1.2.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "1.2.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "overflow_x": null, "overflow_y": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "94144dc280ac40b883a40b64a3baea18": {"model_module": "@jupyter-widgets/controls", "model_module_version": "1.5.0", "model_name": "ProgressStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "1.5.0", "_model_name": "ProgressStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "StyleView", "bar_color": null, "description_width": ""}}, "a693643bcb3042a18ae073646da8dff8": {"model_module": "@jupyter-widgets/base", "model_module_version": "1.2.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "1.2.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "overflow_x": null, "overflow_y": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "c29a93a4d2f24975b52c1682d607a097": {"model_module": "@jupyter-widgets/base", "model_module_version": "1.2.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "1.2.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "overflow_x": null, "overflow_y": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "ce7439bf16da48c085c6a7c840ff9bbe": {"model_module": "@jupyter-widgets/controls", "model_module_version": "1.5.0", "model_name": "DescriptionStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "1.5.0", "_model_name": "DescriptionStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "StyleView", "description_width": ""}}, "d05d94f10f154d639e6f87bb68f58acc": {"model_module": "@jupyter-widgets/controls", "model_module_version": "1.5.0", "model_name": "DescriptionStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "1.5.0", "_model_name": "DescriptionStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "StyleView", "description_width": ""}}, "d79a332fd5b340458fee9a2274da4001": {"model_module": "@jupyter-widgets/controls", "model_module_version": "1.5.0", "model_name": "ProgressStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "1.5.0", "_model_name": "ProgressStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "StyleView", "bar_color": null, "description_width": ""}}, "e235f09595c448aeb8d9037c8b6c649b": {"model_module": "@jupyter-widgets/controls", "model_module_version": "1.5.0", "model_name": "FloatProgressModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "1.5.0", "_model_name": "FloatProgressModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "1.5.0", "_view_name": "ProgressView", "bar_style": "success", "description": "", "description_tooltip": null, "layout": "IPY_MODEL_497fc24721ff40a193ae12f691594ee1", "max": 2154.0, "min": 0.0, "orientation": "horizontal", "style": "IPY_MODEL_d79a332fd5b340458fee9a2274da4001", "value": 2154.0}}, "eae00ef9fc3744f19789da1287199b09": {"model_module": "@jupyter-widgets/controls", "model_module_version": "1.5.0", "model_name": "HTMLModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "1.5.0", "_model_name": "HTMLModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "1.5.0", "_view_name": "HTMLView", "description": "", "description_tooltip": null, "layout": "IPY_MODEL_0fcba7b529e547cca87f9dfb6a94572f", "placeholder": "\u200b", "style": "IPY_MODEL_d05d94f10f154d639e6f87bb68f58acc", "value": " 2154/2154 [00:04&lt;00:00, 557.42it/s]"}}, "eed49ecd7d1c49a2b8c82d2cc6e61cd0": {"model_module": "@jupyter-widgets/controls", "model_module_version": "1.5.0", "model_name": "HBoxModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "1.5.0", "_model_name": "HBoxModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "1.5.0", "_view_name": "HBoxView", "box_style": "", "children": ["IPY_MODEL_8b384895689149e8a24bd317a44a2fbe", "IPY_MODEL_e235f09595c448aeb8d9037c8b6c649b", "IPY_MODEL_1f0eb00bb5c74942bca5b0ca48860897"], "layout": "IPY_MODEL_090c45f7608a406fa78ae50f141d7c57"}}}, "version_major": 2, "version_minor": 0}
</script>


    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./week_1\04"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        
        <div class='prev-next-bottom'>
            
    <a class='left-prev' id="prev-link" href="features.html" title="previous page">Featurization</a>
    <a class='right-next' id="next-link" href="advanced_ml.html" title="next page">Advanced ML methods</a>

        </div>
        
        </div>
    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By Enze Chen and Mark Asta<br/>
        
            &copy; Copyright 2021.<br/>
          <div class="extra_footer">
            <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">
  <img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/80x15.png" />
</a>

          </div>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>
  
  <script src="../../_static/js/index.1c5a1a01449ed65a7b51.js"></script>

  
<script async="" src="https://www.google-analytics.com/analytics.js"></script>
<script>
                        window.ga = window.ga || function () {
                            (ga.q = ga.q || []).push(arguments) };
                        ga.l = +new Date;
                        ga('create', 'UA-197730750-1', 'auto');
                        ga('set', 'anonymizeIp', true);
                        ga('send', 'pageview');
                    </script>

  </body>
</html>